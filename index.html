<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Mensaje para mi novia üíñ</title>
  <style>
    body { font-family: system-ui, sans-serif; background:#0f172a; color:#f1f5f9; padding:20px; }
    .card { background:#1e293b; border-radius:16px; padding:20px; box-shadow:0 10px 25px rgba(0,0,0,.3); max-width:800px; margin:auto; }
    h1 { color:#60a5fa; text-align:center; }
    textarea { width:100%; min-height:220px; margin-top:12px; border-radius:12px; border:1px solid #334155; padding:12px; background:#0f172a; color:#f1f5f9; }
    .controls { display:flex; gap:10px; margin:16px 0; }
    button { padding:12px 16px; border:none; border-radius:12px; cursor:pointer; font-weight:600; }
    #play { background:#60a5fa; color:white; }
    #stop { background:#334155; color:white; }
  </style>
</head>
<body>
  <div class="card">
    <h1>Mensaje para ti üíï</h1>
    <div class="controls">
      <button id="play">‚ñ∂ Reproducir</button>
      <button id="stop">‚èπ Detener</button>
    </div>
    <textarea id="script"></textarea>
  </div>

  <script>
    const ta = document.getElementById('script');
    ta.value = `Amor m√≠o, quiero que escuches esto de parte m√≠a: 
Creo en ti, en tu fuerza, en tu inteligencia y en todo lo que eres capaz de lograr. 
S√© que a veces puede sentirse dif√≠cil, pero yo s√© que ser√°s la mejor, porque dentro de ti hay una grandeza que nadie puede detener.

No est√°s sola, mi amor. Yo estoy contigo, siempre, apoy√°ndote, alent√°ndote y record√°ndote lo maravillosa que eres. 
Si alg√∫n d√≠a dudas de ti misma, escucha estas palabras: yo conf√≠o en ti, hoy y siempre. 
Y s√© que lograr√°s cada meta, porque tienes un coraz√≥n imparable. 
Te amo con todo lo que soy.`;

    let voices = [];
    const synth = window.speechSynthesis;

    function loadVoices(){
      voices = synth.getVoices();

      // Intentar encontrar voz masculina en espa√±ol
      let maleVoice = voices.find(v =>
        (/es[-_]?mx/i.test(v.lang) || /^es/i.test(v.lang)) &&
        /Raul|Male|Man|Miguel|Diego/i.test(v.name)
      );

      // Si no encuentra, tomar la primera en espa√±ol
      if(!maleVoice){
        maleVoice = voices.find(v => /es[-_]?mx/i.test(v.lang)) ||
                    voices.find(v => /^es/i.test(v.lang));
      }

      // Guardar la voz seleccionada
      window.selectedVoice = maleVoice;
    }

    loadVoices();
    if (speechSynthesis.onvoiceschanged !== undefined) {
      speechSynthesis.onvoiceschanged = loadVoices;
    }

    function speak(){
      synth.cancel();
      const utter = new SpeechSynthesisUtterance(ta.value);
      if(window.selectedVoice){
        utter.voice = window.selectedVoice;
        utter.lang = window.selectedVoice.lang;
      } else {
        utter.lang = 'es-MX';
      }
      utter.rate = 1;
      utter.pitch = 1;
      synth.speak(utter);
    }

    document.getElementById('play').addEventListener('click', speak);
    document.getElementById('stop').addEventListener('click', () => synth.cancel());
  </script>
</body>
</html>
